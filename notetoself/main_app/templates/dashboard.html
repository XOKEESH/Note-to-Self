{% extends 'base.html' %}
{% load static %}

{% block head %}
  <title>Dashboard - Note to Self</title>
  <link rel="stylesheet" href="{% static 'css/modal.css' %}" />
  <script defer src="{% static 'js/reflectionModals.js' %}"></script>
{% endblock %}

{% block content %}
  <div class="dashboard-container">
    <h1>Good Morning, Kisha!</h1>
    <p>Here you can track your gratitude journaling progress, reflect on your day, and visualize your ideal future.</p>

    <section class="reflection-buttons">
    <button id="morning-reflection-btn">Morning Reflection</button>
    <button id="evening-reflection-btn">Evening Reflection</button>

    <a href="{% url 'Morning_Reflection_Create' %}"> Add Morning Reflection</a>
    <a href="{% url 'Evening_Reflection_Create' %}"> Add Evening Reflection</a>

    <!-- <form 
    action="{% url 'Morning_Reflection_Create' %}"
    method="post" 
    class="subsection-content" 
    autocomplete="off"
    >
      {% csrf_token %} 
      {{ MorningReflection_Form.as_p }}
      <button type="submit" class="btn submit">Add Morning Reflection</button>
    </form> -->


    <!-- <form 
    action="{% url 'Evening_Reflection_Create' %}"
    method="post" 
    class="subsection-content" 
    autocomplete="off"
    >
      {% csrf_token %} 
      {{ EveningReflection_Form.as_p }}
      <button type="submit" class="btn submit">Add Evening Reflection</button>
    </form> -->

      <!-- Morning Modal -->
      <!-- <div class="modal" id="morning-reflection-modal">
        <div class="modal-content">
          <span id="close-modal">X</span>
          <div id="progress-bar-container">
            <div id="progress-bar"></div>
          </div>
          <div id="question-content">
            <h2 id="modal-header">Welcome to Your Morning Reflection</h2>
            <p id="modal-body">Click next to start your morning reflection.</p>
            <textarea id="text-box" placeholder="Your response..."></textarea>
            <input type="file" id="image-upload" />
          </div>
          <button id="next-question">Next</button>
        </div>
      </div>
    </section>    -->
    
    <!-- Evening Modal -->
    <!-- <div class="modal" id="evening-reflection-modal">
      <div class="modal-content">
        <span id="close-evening-modal">X</span>
        <div id="evening-progress-bar-container">
          <div id="evening-progress-bar"></div>
        </div>
        <div id="evening-question-content">
          <h2 id="evening-modal-header">Welcome to Your Evening Reflection</h2>
          <p id="evening-modal-body">Click next to start your evening reflection.</p>
          <textarea id="evening-text-box" placeholder="Your response..."></textarea>
          <input type="file" id="evening-image-upload" />
        </div>
        <button id="next-evening-question">Next</button>
      </div>
    </div>
  </section>   -->

    <!-- Quotes Section -->
    <section class="quotes">
      <h2>Today's Motivational Quote</h2>
      <img src="{% static quote_image_url %}" alt="Motivational Quote" />
    </section>

    <!-- Best Case Scenario Section -->
    <section class="reflection-buttons">
      <h2>Best Case Scenario</h2>
      <button id="bcs-btn">Best Case Scenario</button>
    
      <!-- Modal -->
      <div class="modal" id="bcs-modal">
        <div class="modal-content">
          <span id="close-bcs-modal">X</span>
          
          <!-- Intro Screen -->
          <div id="bcs-intro">
            <h2>Welcome to Best Case Scenario Journaling</h2>
            <p>Best Case Scenario (BCS) journaling is a powerful exercise to help you visualize and strive toward your ideal outcome. Take a moment to dream big and describe your best-case scenario for your goals, relationships, or future plans.</p>
            <button id="bcs-skip-intro">Skip Intro</button>
            <button id="bcs-next">Next</button>
          </div>
    
          <!-- Prompt Screen -->
          <div id="bcs-prompt" style="display: none;">
            <h2 id="bcs-header">Describe Your Best Case Scenario</h2>
            <textarea id="bcs-text-box" placeholder="Describe your best case scenario here..."></textarea>
            <button id="bcs-submit">Submit</button>
          </div>
    
          <!-- Confirmation Screen -->
          <div id="bcs-confirmation" style="display: none;">
            <h2>Well done!</h2>
            <p>Visualizing your Best Case Scenario is a step toward making it real. Keep striving toward your ideal outcome!</p>
            <button id="bcs-close">Close</button>
          </div>
        </div>
      </div>
    </section>
 

    <a href="{% url 'Bestcase_Scenario_Create' %}"> Start Scenario Exercise</a>

    <!-- <form 
    action="{% url 'Bestcase_Scenario_Create' %}"
    method="post" 
    class="subsection-content" 
    autocomplete="off"
    >
      {% csrf_token %} 
      {{ BestCaseScenario_Form.as_p }}
      <button type="submit" class="btn submit">Add New Scenario</button>
    </form> -->

    <!-- Journal Progress Section -->
    <section class="journal-progress">
      <h2>Your Journaling Progress</h2>
      <p>View your entries, reflect on past entries, and continue your mindfulness journey.</p>
      <a href="/journal">View Your Journal</a>
    </section>

    <!-- Your Reflections Section -->
    <section class="your-reflections">
      <h2>Your Reflections</h2>
      {% if reflections %}
        <ul>
          {% for reflection in reflections %}
            <li>
              <p><strong>Gratitude:</strong> {{ reflection.gratitude_text }}</p>
              {% if reflection.gratitude_image %}
                <img src="{{ reflection.gratitude_image.url }}" alt="Gratitude Image" style="max-width: 200px;">
              {% endif %}
              <p><small>Created on: {{ reflection.date_created }}</small></p>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p>You have not added any reflections yet.</p>
      {% endif %}
    </section>

  </div>
  {% endblock %}

